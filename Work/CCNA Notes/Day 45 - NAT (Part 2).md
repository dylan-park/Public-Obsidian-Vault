---
tags:
  - work
  - ccna
---
- ## Dynamic NAT
	- In **Dynamic NAT**, the router dynamically maps *inside local* addresses to *inside global* addresses as needed
	- An ACL is used to identify which traffic should be translated
		- If the source IP is **permitted** by the ACL, the source IP will be translated
		- If the source IP is **denied** by the ACL, the source IP will NOT be translated
			- The traffic will NOT be dropped
	- A NAT pool is used to define the available *inside global* addresses
	- Although they are dynamically assigned, the mappings are still one-to-one (one *inside local* IP address per *inside global* IP address)
	- If there aren't enough *inside global* IP addresses available (all are currently being used), it is called 'NAT pool exhaustion'
		- If a packet from another inside host arrives and needs NAT, but there are no available addresses, the router will drop the packet
		- The host will be unable to access outside networks until one of the *inside global* IP addresses becomes available
		- Dynamic NAT entries will time out automatically if not used, or you can clear them manually
	- Dynamic NAT entries have a timer of 24 hours since they were last used before they are released
	- ### Configuration
		- `ip nat inside` command from interface config defines the 'inside' interface(s) connected to the internal network
		- `ip nat outside` command from interface config defines the 'outside' interface(s) connected to the external network
		- `access-list *number* permit *ip-address* *wildcard-mask*` command will define the traffic that should be translated by making an ACL
		- `ip nat pool *pool-name* *first-ip-in-range* *last-ip-in-range* prefix-length *prefix-length*` command defines the pool of inside global IP addresses to use
		- `ip nat inside source list *acl-number* pool *pool-name*` command configures dynamic NAT by mapping the ACL to the pool
- ## Dynamic PAT
	- **PAT** (Port Address Translation, or **NAT Overload**) translates both the IP addresses and the port number (if necessary)
	- By using a unique port number for each communication flow, a single public IP address can be used by many different internal hosts
		- Port numbers are 16 bits = over 65,000 available port numbers
	- The router will keep track of which *inside local* address is using which *inside global* address and port
	- Because many inside hosts can share a single public IP, PAT is very useful for preserving public IP addresses, and it is used in networks all over the world
	- ### Configuration
		- #### Pool
			- `ip nat inside` command from interface config defines the 'inside' interface(s) connected to the internal network
			- `ip nat outside` command from interface config defines the 'outside' interface(s) connected to the external network
			- `access-list *number* permit *ip-address* *wildcard-mask*` command will define the traffic that should be translated by making an ACL
			- `ip nat pool *pool-name* *first-ip-in-range* *last-ip-in-range* prefix-length *prefix-length*` command defines the pool of inside global IP addresses to use
			- `ip nat inside source list *acl-number* pool *pool-name* overload` command configures PAT by mapping the ACL to the pool and using the `overload` keyword at the end
		- #### Interface
			- `ip nat inside` command from interface config defines the 'inside' interface(s) connected to the internal network
			- `ip nat outside` command from interface config defines the 'outside' interface(s) connected to the external network
			- `access-list *number* permit *ip-address* *wildcard-mask*` command will define the traffic that should be translated by making an ACL
			- `ip nat inside source list *acl-number* interface *interface* overload` command configures PAT by mapping the ACL to the interface with the router's public IP, and enabling `overload`