---
tags:
  - work
  - ccna
---
- ## Port Security ^ccna-port-security
	- Port security is a security feature of Cisco switches
	- It allows you to control which source MAC address(es) are allowed to enter the switchport
	- If an unauthorized source MAC address enters the port, an action will be taken
		- The default action is to place the interface in an 'err-disabled' state
		- After this, the learned MAC address(es) are cleared
	- When you enable port security on an interface with the default settings, **one** MAC address is allowed
		- You can configure the allowed MAC address manually
		- If you don't configure it manually, the switch will allow the first source MAC address that enters the interface
	- You can change the maximum number of MAC addresses allowed
	- A combination of manually configured MAC addresses and dynamically learned addresses is possible
	- ### Why Port Security
		- Port security allows network admins to control which devices are allowed to access the network
		- However, MAC address spoofing is a simple task
			- It's easy to configure a device to send frames with a different source MAC address
		- Rather than manually specifying the MAC addresses allowed on each port, port security's ability to limit the number of MAC addresses allowed on an interface is more useful
	- ### Configuration
		- `switchport mode access|trunk` command on an interface will configure the port as a static access or trunk port (required for port security)
		- `switchport port-security` command enables port security on the interface
		- `show port-security interface *interface*` command shows port security information for an interface
		- `switchport port-security maximum *amount*` command configures the maximum MAC addresses for the port
		- `switchport port-security mac-address *mac-address*` command configures the mac address as allowed by port security on the port
		- `switchport port-security violation *mode*` command sets the violation mode on the port
		- `errdisable recovery cause psecure-violation` command enables err-disable recovery for port secure violations
			- Every 5 minutes (by default), all err-disabled interfaces will be re-enabled <u>if err-disable recovery has been enabled for the cause of the interface's disablement</u>
		- `errdisable recovery interval *seconds*` command sets err-disable timer interval
- ## Violation Modes
	- There are three different violation modes that determine what the switch will do if an unauthorized frame enters an interface configured with port security
		- **Shutdown**
			- Effectively shuts down the port by placing it in an err-disabled state
			- Generates a Syslog and/or SNMP message when the interface is disabled
			- The violation counter is set to 1 when the interface is disabled
		- **Restrict**
			- The switch discards traffic from unauthorized MAC addresses
			- The interface is NOT disabled
			- Generates a Syslog and/or SNMP message each time an unauthorized MAC is detected
			- The violation counter is incremented by 1 for each unauthorized frame
		- **Protect**
			- The switch discards traffic from unauthorized MAC addresses
			- The interface is NOT disabled
			- It does NOT generate Syslog/SNMP messages for unauthorized traffic
			- It does NOT increment the violation counter
- ## Secure MAC Address Aging
	- By default secure MAC addresses will not 'age out'
		- Can be configured with `switchport port-security aging time *minutes*` command
	- The default aging type is **Absolute**
		- **Absolute**: After the secure MAC address is learned, the aging timer starts and the MAC is removed after the timer expires, even if the switch continues receiving frames from that source MAC address
		- **Inactivity**: After the secure MAC address is learned, the aging timer starts but is reset every time a frame from that source MAC address is received on the interface
	- `switchport port-security aging type *absolute|inactivity*` command configures the aging type
	- Secure Static MAC aging is disabled by default
		- Can be enabled with the `switchport port-security aging static` command
- ## Sticky Secure MAC Addresses
	- 'Sticky' secure MAC address learning can be enabled with the `switchport port-security mac-address sticky` command
		- When issued, all current dynamically-learned secure MAC addresses will be converted to sticky secure MAC addresses
		- If you issue it with the `no` command, all current sticky secure MAC addresses will be converted to regular dynamically-learned secure MAC addresses
	- When enabled, dynamically learned MAC addresses will be added to the running config
	- The 'sticky' secure MAC addresses will <u>never</u> age out
		- You need to save the running-config to the startup-config to make them truly permanent (or else they will not be kept if the switch restarts)
- ## MAC Address Table
	- Secure MAC addresses will be added to the MAC address table like any other MAC address
		- Sticky and Static secure MAC addresses will have a type of STATIC
		- Dynamically-learned secure MAC addresses will have a type of DYNAMIC
		- You can view all secure MAC addresses with the `show mac address-table secure` command